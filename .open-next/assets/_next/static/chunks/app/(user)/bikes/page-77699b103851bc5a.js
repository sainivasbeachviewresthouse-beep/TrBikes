(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[992],{13172:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>m});var i=r(51082),n=r(15106),a=r(5469),s=r(78521),c=r(35473),l=r(40366),o=r(21257),u=r(24181);function d(e){let{bike:t}=e,r=(0,u.useRouter)();return(0,i.jsxs)(l.A,{className:"shadow-sm h-100 cursor-pointer",onClick:()=>{r.push("/bikes/".concat(encodeURIComponent(t.name)))},style:{cursor:"pointer"},children:[(0,i.jsx)(l.A.Img,{variant:"top",src:t.image_url||"/bike-placeholder.jpg",alt:t.name,style:{height:"180px",objectFit:"cover",borderBottom:"1px solid #eee"}}),(0,i.jsxs)(l.A.Body,{children:[(0,i.jsx)(l.A.Title,{className:"text-truncate",children:t.name}),(0,i.jsxs)(l.A.Text,{className:"text-muted text-truncate",children:[t.category," â€¢ ",t.color]}),(0,i.jsx)(o.A,{bg:t.availability?"success":"secondary",children:t.availability?"Available":"Unavailable"})]})]})}var p=r(98955);function m(){let{bikes:e,setBikes:t,addBike:r,updateBike:l,removeBike:o}=(0,c.G)(),[u,m]=(0,n.useState)(0===e.length),h=(0,n.useCallback)(async()=>{if(e.length>0)return void m(!1);m(!0);try{let e=await fetch("/api/bikes"),r=await e.json();r.success&&t(r.data)}catch(e){console.error("Failed to fetch bikes",e)}finally{m(!1)}},[t,e.length]);return((0,n.useEffect)(()=>{0===e.length&&h();let t=s.m.channel("bikes-changes").on("postgres_changes",{event:"*",schema:"public",table:"bikes"},e=>{"INSERT"===e.eventType?r(e.new):"UPDATE"===e.eventType?l(e.new):"DELETE"===e.eventType&&o(e.old.id)}).subscribe();return()=>{s.m.removeChannel(t)}},[h,r,l,o,e.length]),u)?(0,i.jsx)("div",{className:"d-flex justify-content-center align-items-center py-5",children:(0,i.jsx)(p.A,{})}):(0,i.jsx)(a.A,{className:"py-5",children:0===e.length?(0,i.jsx)("p",{className:"text-muted text-center",children:"No bikes available."}):(0,i.jsx)("div",{className:"row g-4",children:e.map(e=>(0,i.jsx)("div",{className:"col-12 col-sm-6 col-md-4 col-lg-3",children:(0,i.jsx)(d,{bike:e})},e.id))})})}},18097:(e,t)=>{var r;!function(){"use strict";var i={}.hasOwnProperty;function n(){for(var e="",t=0;t<arguments.length;t++){var r=arguments[t];r&&(e=a(e,function(e){if("string"==typeof e||"number"==typeof e)return e;if("object"!=typeof e)return"";if(Array.isArray(e))return n.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var r in e)i.call(e,r)&&e[r]&&(t=a(t,r));return t}(r)))}return e}function a(e,t){return t?e?e+" "+t:e+t:e}e.exports?(n.default=n,e.exports=n):void 0===(r=(function(){return n}).apply(t,[]))||(e.exports=r)}()},19178:(e,t,r)=>{"use strict";r.d(t,{Jm:()=>o,Wz:()=>u,gy:()=>l,oU:()=>c});var i=r(15106);r(51082);let n=i.createContext({prefixes:{},breakpoints:["xxl","xl","lg","md","sm","xs"],minBreakpoint:"xs"}),{Consumer:a,Provider:s}=n;function c(e,t){let{prefixes:r}=(0,i.useContext)(n);return e||r[t]||t}function l(){let{breakpoints:e}=(0,i.useContext)(n);return e}function o(){let{minBreakpoint:e}=(0,i.useContext)(n);return e}function u(){let{dir:e}=(0,i.useContext)(n);return"rtl"===e}},21257:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var i=r(18097),n=r.n(i),a=r(15106),s=r(19178),c=r(51082);let l=a.forwardRef((e,t)=>{let{bsPrefix:r,bg:i="primary",pill:a=!1,text:l,className:o,as:u="span",...d}=e,p=(0,s.oU)(r,"badge");return(0,c.jsx)(u,{ref:t,...d,className:n()(o,p,a&&"rounded-pill",l&&"text-".concat(l),i&&"bg-".concat(i))})});l.displayName="Badge";let o=l},24181:(e,t,r)=>{"use strict";var i=r(11649);r.o(i,"usePathname")&&r.d(t,{usePathname:function(){return i.usePathname}}),r.o(i,"useRouter")&&r.d(t,{useRouter:function(){return i.useRouter}})},35473:(e,t,r)=>{"use strict";function i(e){return[...e].sort((e,t)=>e.availability===t.availability?new Date(e.created_at||"").getTime()-new Date(t.created_at||"").getTime():e.availability?-1:1)}r.d(t,{G:()=>n});let n=(0,r(16414).v)(e=>({bikes:[],setBikes:t=>e({bikes:i(t)}),addBike:t=>e(e=>({bikes:i([t,...e.bikes])})),updateBike:t=>e(e=>({bikes:i(e.bikes.map(e=>e.id===t.id?t:e))})),removeBike:t=>e(e=>({bikes:e.bikes.filter(e=>e.id!==t)}))}))},78521:(e,t,r)=>{"use strict";r.d(t,{m:()=>i});let i=(0,r(14766).UU)("https://queorpstgdhpjarndcyp.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InF1ZW9ycHN0Z2RocGphcm5kY3lwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjA2MDc5NzEsImV4cCI6MjA3NjE4Mzk3MX0.KmsCQcRycZo-YPys5D78aRUcKS0nYIFhDQLI2bSS1Qw")},84792:(e,t,r)=>{"use strict";r.d(t,{A:()=>c});var i=r(15106),n=r(18097),a=r.n(n),s=r(51082);let c=e=>i.forwardRef((t,r)=>(0,s.jsx)("div",{...t,ref:r,className:a()(t.className,e)}))},87877:(e,t,r)=>{Promise.resolve().then(r.bind(r,13172))},98955:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var i=r(51082),n=r(806);let a=()=>{let e={animate:{scaleY:[1,1.4,1],opacity:[.5,1,.5],transition:{duration:.6,repeat:1/0,repeatType:"mirror"}}},t={width:"8px",height:"40px",borderRadius:"4px",backgroundColor:"#0dcaf0",marginRight:"8px"};return(0,i.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"60vh"},children:[0,1,2,3].map(r=>(0,i.jsx)(n.P.div,{style:t,variants:e,animate:"animate",transition:{delay:.1*r}},r))})}}},e=>{e.O(0,[194,294,413,106,358],()=>e(e.s=87877)),_N_E=e.O()}]);